// regex: VAR=v\d+v\d+

script {
    pub entry fn __entry() -> __ptr never {
        local u64 _result

        entry():
        v10v1 = call main()
        v11v1 = get_local __ptr u64, _result
        store v10v1 to v11v1
        v134v1 = get_local __ptr u64, _result
        v21v1 = const u64 8
        retd v134v1 v21v1
    }

    entry_orig fn main() -> u64 {
        entry():
        v0 = const u64 0
        v00 = call switcher(v0)

        v1 = const u64 1
        v10 = call switcher(v1)
        v11 = add v10, v00

        v2 = const u64 2
        v20 = call switcher(v2)
        v21 = add v20, v11

        v3 = const u64 3
        v30 = call switcher(v3)
        v31 = add v30, v21

        ret u64 v31
    }

    fn switcher(v: u64) -> u64 {
        entry(v: u64):
        // check: switch
        switch v, default: default_block(), [0: block0(), 1: block1(), 2: block2()]

        default_block():
        v = const u64 3
        ret u64 v

        block0():
        v0 = const u64 0
        ret u64 v0

        block1():
        v1 = const u64 1
        ret u64 v1

        block2():
        v2 = const u64 2
        ret u64 v2
    }
}
