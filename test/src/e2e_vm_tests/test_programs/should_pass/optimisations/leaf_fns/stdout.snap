---
source: test/src/snapshot/mod.rs
---
> forc build --path test/src/e2e_vm_tests/test_programs/should_pass/optimisations/leaf_fns --release --ir final --asm final | filter-fn leaf_fns leaf_fn

pshh i524288                  ; save registers 40..64
move $$locbase $sp            ; save locals base register for function leaf_fn_0_1
poph i524288                  ; restore registers 40..64
jal  $zero $$reta i0          ; return from call

pshl i1                       ; save registers 16..40
pshh i524288                  ; save registers 40..64
move $$locbase $sp            ; save locals base register for function leaf_fn_6_2
add  $r0 $$arg0 $$arg1
add  $r0 $r0 $$arg2
add  $r0 $r0 $$arg3
add  $r0 $r0 $$arg4
add  $r0 $r0 $$arg5
move $$retv $r0               ; set return value
poph i524288                  ; restore registers 40..64
popl i1                       ; restore registers 16..40
jal  $zero $$reta i0          ; return from call

pshl i7                       ; save registers 16..40
pshh i524288                  ; save registers 40..64
move $$locbase $sp            ; save locals base register for function leaf_fn_7_4
lw   $r0 $$arg5 i0            ; load argument 5 (f) from its stack slot
lw   $r1 $$arg5 i1            ; load argument 6 (g) from its stack slot
add  $r2 $$arg0 $$arg1
add  $r2 $r2 $$arg2
add  $r2 $r2 $$arg3
add  $r2 $r2 $$arg4
add  $r0 $r2 $r0
add  $r0 $r0 $r1
move $$retv $r0               ; set return value
poph i524288                  ; restore registers 40..64
popl i7                       ; restore registers 16..40
jal  $zero $$reta i0          ; return from call
