---
source: test/src/snapshot/mod.rs
---
> forc build --path test/src/e2e_vm_tests/test_programs/should_pass/optimisations/leaf_fns --release --ir final --asm final | filter-fn leaf_fns leaf_fn

fn leaf_fn_0_1() -> () {
    entry():
    v24v1 = const unit ()
    ret () v24v1
}


fn leaf_fn_6_2(a: u64, b: u64, c: u64, d: u64, e: u64, f: u64) -> u64 {
    entry(a: u64, b: u64, c: u64, d: u64, e: u64, f: u64):
    v32v1 = add a, b
    v33v1 = add v32v1, c
    v34v1 = add v33v1, d
    v35v1 = add v34v1, e
    v36v1 = add v35v1, f
    ret u64 v36v1
}


fn leaf_fn_7_4(a: u64, b: u64, c: u64, d: u64, e: u64, f: u64, g: u64) -> u64 {
    entry(a: u64, b: u64, c: u64, d: u64, e: u64, f: u64, g: u64):
    v45v1 = add a, b
    v46v1 = add v45v1, c
    v47v1 = add v46v1, d
    v48v1 = add v47v1, e
    v49v1 = add v48v1, f
    v50v1 = add v49v1, g
    ret u64 v50v1
}


fn leaf_fn_caller_5() -> () {
    entry():
    v52v1 = const u64 0
    v53v1 = const u64 1
    v54v1 = const u64 2
    v55v1 = const u64 3
    v56v1 = const u64 4
    v57v1 = const u64 5
    v58v1 = call leaf_fn_6_2(v52v1, v53v1, v54v1, v55v1, v56v1, v57v1)
    v59v1 = const unit ()
    ret () v59v1
}


pshh i524288                  ; [fn init: leaf_fn_0_1]: push used high registers 40..64
poph i524288                  ; [fn end: leaf_fn_0_1]: restore used high registers 40..64
jal  $zero $$reta i0          ; [fn end: leaf_fn_0_1] return from call


pshl i1                       ; [fn init: leaf_fn_6_2]: push used low registers 16..40
pshh i524288                  ; [fn init: leaf_fn_6_2]: push used high registers 40..64
add  $r0 $$arg0 $$arg1
add  $r0 $r0 $$arg2
add  $r0 $r0 $$arg3
add  $r0 $r0 $$arg4
add  $r0 $r0 $$arg5
move $$retv $r0               ; [fn end: leaf_fn_6_2] set return value
poph i524288                  ; [fn end: leaf_fn_6_2]: restore used high registers 40..64
popl i1                       ; [fn end: leaf_fn_6_2]: restore used low registers 16..40
jal  $zero $$reta i0          ; [fn end: leaf_fn_6_2] return from call




pshl i7                       ; [fn init: leaf_fn_7_4]: push used low registers 16..40
pshh i524288                  ; [fn init: leaf_fn_7_4]: push used high registers 40..64
lw   $r0 $$arg5 i0            ; [fn init: leaf_fn_7_4]: load argument 5 (f) from its stack slot
lw   $r1 $$arg5 i1            ; [fn init: leaf_fn_7_4]: load argument 6 (g) from its stack slot
add  $r2 $$arg0 $$arg1
add  $r2 $r2 $$arg2
add  $r2 $r2 $$arg3
add  $r2 $r2 $$arg4
add  $r0 $r2 $r0
add  $r0 $r0 $r1
move $$retv $r0               ; [fn end: leaf_fn_7_4] set return value
poph i524288                  ; [fn end: leaf_fn_7_4]: restore used high registers 40..64
popl i7                       ; [fn end: leaf_fn_7_4]: restore used low registers 16..40
jal  $zero $$reta i0          ; [fn end: leaf_fn_7_4] return from call



pshl i1                       ; [fn init: leaf_fn_caller_5]: push used low registers 16..40
pshh i524288                  ; [fn init: leaf_fn_caller_5]: push used high registers 40..64
move $r0 $$reta               ; [fn init: leaf_fn_caller_5]: save return address
movi $$arg0 i0                ; [call: leaf_fn_6_2]: pass argument 0
movi $$arg1 i1                ; [call: leaf_fn_6_2]: pass argument 1
movi $$arg2 i2                ; [call: leaf_fn_6_2]: pass argument 2
movi $$arg3 i3                ; [call: leaf_fn_6_2]: pass argument 3
movi $$arg4 i4                ; [call: leaf_fn_6_2]: pass argument 4
movi $$arg5 i5                ; [call: leaf_fn_6_2]: pass argument 5
subi $$tmp $pc i136           ; load far jump target address
jal  $$reta $$tmp i0          ; [call: leaf_fn_6_2]: call function
move $$reta $r0               ; [fn end: leaf_fn_caller_5] restore return address
poph i524288                  ; [fn end: leaf_fn_caller_5]: restore used high registers 40..64
popl i1                       ; [fn end: leaf_fn_caller_5]: restore used low registers 16..40
jal  $zero $$reta i0          ; [fn end: leaf_fn_caller_5] return from call
