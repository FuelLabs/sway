<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Attributes - The Sway Programming Language</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Sway Programming Language</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/FuelLabs/sway" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="attributes"><a class="header" href="#attributes">Attributes</a></h1>
<p>Attributes are a form of metadata that can additionally instruct Sway compiler or other tools like <code>forc test</code>. Attributes can annotate different language elements, like, e.g., items, enum variants, struct fields, etc.</p>
<p>Below is the list of attributes supported by the Sway compiler, ordered alphabetically:</p>
<ul>
<li><a href="#abi-name">ABI Name</a></li>
<li><a href="#allow">Allow</a></li>
<li><a href="#cfg">Cfg</a></li>
<li><a href="#deprecated">Deprecated</a></li>
<li><a href="#error">Error</a></li>
<li><a href="#error-type">Error Type</a></li>
<li><a href="#fallback">Fallback</a></li>
<li><a href="#inline">Inline</a></li>
<li><a href="#payable">Payable</a></li>
<li><a href="#payable">Storage</a></li>
<li><a href="#test">Test</a></li>
</ul>
<h2 id="abi-name"><a class="header" href="#abi-name">ABI Name</a></h2>
<p>The <code>#[abi_name]</code> attribute allows to specify the ABI name for an item.
This means that when an ABI JSON file is generated, the name that is output is the one specified
by the attribute. This can be useful to allow renaming items, while allowing for keeping backwards
compatibility at the contract ABI level.</p>
<blockquote>
<p><strong>Note</strong>: At the moment, only enum and struct types support the attribute.</p>
</blockquote>
<p>In the example that follows, we originally had <code>MyStruct</code> and <code>MyEnum</code> types, which we, later on, renamed to <code>RenamedMyStruct</code> and <code>RenamedMyEnum</code> in code. To keep the backward compatibility of the ABI, we annotate the types with the <code>#[abi_name]</code> attribute and give them the original names:</p>
<pre><code class="language-sway">contract;

#[abi_name(name = "MyStruct")]
struct RenamedMyStruct {}

#[abi_name(name = "MyEnum")]
enum RenamedMyEnum {
  A: ()
}

abi MyAbi {
    fn my_struct() -&gt; RenamedMyStruct;
    fn my_enum() -&gt; RenamedMyEnum;
}

impl MyAbi for Contract {
  fn my_struct() -&gt; RenamedMyStruct { RenamedMyStruct{} }
  fn my_enum() -&gt; RenamedMyEnum { RenamedMyEnum::A }
}
</code></pre>
<p>This generates the following JSON ABI:</p>
<pre><code class="language-json">{
  "concreteTypes": [
    {
      "concreteTypeId": "215af2bca9e1aa8fec647dab22a0cd36c63ce5ed051a132d51323807e28c0d67",
      "metadataTypeId": 1,
      "type": "enum MyEnum"
    },
    {
      "concreteTypeId": "d31db280ac133d726851d8003bd2f06ec2d3fc76a46f1007d13914088fbd0791",
      "type": "struct MyStruct"
    }
  ],
  ...
}
</code></pre>
<p>We get the same JSON ABI output both before and after renaming the types, due to attributing them with
<code>#[abi_name(name = ...)]</code>, which forces them to be generated with their previous Sway names.
This means consumers of this contract will still get the original names, keeping compatibility at the ABI level.</p>
<h2 id="allow"><a class="header" href="#allow">Allow</a></h2>
<p>The <code>#[allow(...)]</code> attribute disables compiler checks so that certain warnings will go unreported. The following warnings can be disabled:</p>
<ul>
<li><code>#[allow(dead_code)]</code> disables warnings for dead code;</li>
<li><code>#[allow(deprecated)]</code> disables warnings for usage of deprecated elements, like, e.g., structs, functions, enum variants, etc.</li>
</ul>
<h2 id="cfg"><a class="header" href="#cfg">Cfg</a></h2>
<p>The <code>#[cfg(...)]</code> attribute allows conditional compilation. The annotated code element will be compiled only if the condition in to the <code>cfg</code> attribute evaluates to true. The following conditions can be expressed:</p>
<ul>
<li><code>#[cfg(target = "&lt;target&gt;")]</code> where <code>&lt;target&gt;</code> can be either "evm" or "fuel";</li>
<li><code>#[cfg(program_type = "&lt;program_type&gt;")]</code> where <code>&lt;program_type&gt;</code> can be either "predicate", "script", "contract", or "library";</li>
<li><code>#[cfg(experimental_&lt;feature_flag&gt; = true/false)]</code> where <code>&lt;feature_flag&gt;</code> is one of the known <a href="../reference/experimental_features.html">experimental feature</a> flags.</li>
</ul>
<h2 id="deprecated"><a class="header" href="#deprecated">Deprecated</a></h2>
<p>The <code>#[deprecated]</code> attribute marks an item as deprecated and makes the compiler emit a warning for every usage of the deprecated item. This warning can be disabled using <code>#[allow(deprecated)]</code>.</p>
<p>It is possible to improve the warning message with <code>#[deprecated(note = "Your deprecation message.")]</code></p>
<h2 id="error"><a class="header" href="#error">Error</a></h2>
<p>The <code>#[error]</code> defines an error message for an error type enum variant:</p>
<pre><code class="language-sway">#[error_type]
enum SomeErrors {
    #[error(m = "An unexpected error occurred.")]
    UnexpectedError: (),
}
</code></pre>
<h2 id="error-type"><a class="header" href="#error-type">Error Type</a></h2>
<p>The <code>#[error_type]</code> marks an enum as error type enum:</p>
<pre><code class="language-sway">#[error_type]
enum SomeErrors {
    ...
}
</code></pre>
<p>All variants of an error type enum must be annotated with the <a href="#error"><code>#[error]</code> attribute</a>. Error type enums are meant to be use in <code>panic</code> expressions for rich error reporting.</p>
<h2 id="fallback"><a class="header" href="#fallback">Fallback</a></h2>
<p>The <code>#[fallback]</code> attribute makes the compiler use the marked function as the contract call fallback function. This means that, when a contract method is called, and the contract method selection fails, the fallback function will be called instead.</p>
<p>More details in <a href="../blockchain-development/calling_contracts.html#fallback">Calling Contracts</a>.</p>
<h2 id="inline"><a class="header" href="#inline">Inline</a></h2>
<p>The inline attribute <em>suggests</em> to the compiler if a copy of the annotated function should be placed in the caller, rather than generating code to call the function where it is defined.</p>
<p>The <code>#[inline(never)]</code> attribute <em>suggests</em> that an inline expansion should never be performed.</p>
<p>The <code>#[inline(always)]</code> attribute <em>suggests</em> that an inline expansion should always be performed.</p>
<blockquote>
<p><strong>Note</strong>: <code>#[inline(..)]</code> in every form is a hint, with no <em>requirements</em> on the compiler to place a copy of the annotated function in the caller. The Sway compiler automatically inlines functions based on internal heuristics. Incorrectly inlining functions can make the program slower, so this attribute should be used with care.</p>
</blockquote>
<h2 id="payable"><a class="header" href="#payable">Payable</a></h2>
<p>The lack of <code>#[payable]</code> implies the method is non-payable. When calling an ABI method that is non-payable, the compiler emits an error if the amount of coins forwarded with the call is not guaranteed to be zero. Note that this is strictly a compile-time check and does not incur any runtime cost.</p>
<h2 id="storage"><a class="header" href="#storage">Storage</a></h2>
<p>In Sway, functions are pure by default but can be opted into impurity via the <code>storage</code> function attribute. The <code>storage</code> attribute may take <code>read</code> and/or <code>write</code> arguments indicating which type of access the function requires.</p>
<p>The <code>#[storage(read)]</code> attribute indicates that a function requires read access to the storage.</p>
<p>The <code>#[storage(write)]</code> attribute indicates that a function requires write access to the storage.</p>
<p>More details in <a href="../blockchain-development/purity.html">Purity</a>.</p>
<h2 id="test"><a class="header" href="#test">Test</a></h2>
<p>The <code>#[test]</code> attribute marks a function to be executed as a test.</p>
<p>The <code>#[test(should_revert)]</code> attribute marks a function to be executed as a test that should revert.</p>
<p>More details in <a href="../testing/unit-testing.html">Unit Testing</a>.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../reference/compiler_intrinsics.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../reference/style_guide.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../reference/compiler_intrinsics.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../reference/style_guide.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
